<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Hive Logistics</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html, body { width: 100%; height: 100%; overflow: hidden; background: #1a1a2e; touch-action: none; overscroll-behavior: none; }
    #game-container {
      position: relative;
      width: 100%;
      height: 100%;
    }
    canvas#gameCanvas {
      display: block;
      width: 100%;
      height: 100%;
      touch-action: none;
    }

    /* HUD overlay */
    #hud {
      position: absolute;
      top: 0; left: 0; right: 0; bottom: 0;
      pointer-events: none;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      color: #f0e6d3;
      user-select: none;
    }
    #hud > * { pointer-events: auto; }

    /* Resource bar */
    #resource-bar {
      position: absolute;
      top: 8px; left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 14px;
      background: rgba(30, 20, 10, 0.85);
      border: 1px solid rgba(200, 160, 60, 0.4);
      border-radius: 6px;
      padding: 6px 14px;
      font-size: 13px;
    }
    .resource-item {
      display: flex;
      align-items: center;
      gap: 4px;
      position: relative;
      cursor: default;
    }
    .resource-item[data-tip]::after {
      content: attr(data-tip);
      position: absolute;
      top: 100%;
      left: 50%;
      transform: translateX(-50%);
      margin-top: 6px;
      background: rgba(30, 20, 10, 0.95);
      border: 1px solid rgba(200, 160, 60, 0.5);
      border-radius: 5px;
      padding: 5px 9px;
      font-size: 11px;
      color: #f0e6d3;
      white-space: nowrap;
      pointer-events: none;
      opacity: 0;
      transition: opacity 0.15s;
      z-index: 20;
    }
    .resource-item[data-tip]:hover::after {
      opacity: 1;
    }
    .resource-icon {
      width: 14px;
      height: 14px;
      border-radius: 3px;
      display: inline-block;
    }
    .res-delta {
      font-size: 10px;
      opacity: 0.7;
    }
    .res-delta.positive { color: #80e060; }
    .res-delta.negative { color: #e06060; }
    .res-delta.zero { color: #a0a0a0; }

    /* Time display */
    #time-display {
      position: absolute;
      top: 8px; right: 12px;
      background: rgba(30, 20, 10, 0.85);
      border: 1px solid rgba(200, 160, 60, 0.4);
      border-radius: 6px;
      padding: 6px 12px;
      font-size: 13px;
    }

    /* Speed controls */
    #speed-controls {
      position: absolute;
      top: 8px; left: 12px;
      display: flex;
      gap: 4px;
      background: rgba(30, 20, 10, 0.85);
      border: 1px solid rgba(200, 160, 60, 0.4);
      border-radius: 6px;
      padding: 4px 8px;
    }
    .speed-btn {
      background: rgba(200, 160, 60, 0.2);
      border: 1px solid rgba(200, 160, 60, 0.3);
      color: #f0e6d3;
      border-radius: 4px;
      padding: 2px 8px;
      cursor: pointer;
      font-size: 13px;
    }
    .speed-btn.active {
      background: rgba(200, 160, 60, 0.5);
      border-color: rgba(200, 160, 60, 0.8);
    }
    .speed-btn:hover { background: rgba(200, 160, 60, 0.4); }
    .volume-sep {
      width: 1px;
      align-self: stretch;
      background: rgba(200, 160, 60, 0.3);
      margin: 0 4px;
    }
    .volume-control {
      display: flex;
      align-items: center;
      gap: 4px;
      font-size: 13px;
    }
    .volume-icon { font-size: 14px; }
    #volume-slider {
      width: 70px;
      accent-color: #c8a03c;
    }

    /* Mode toolbar */
    #mode-toolbar {
      position: absolute;
      bottom: 12px; left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 6px;
      background: rgba(30, 20, 10, 0.85);
      border: 1px solid rgba(200, 160, 60, 0.4);
      border-radius: 6px;
      padding: 6px 12px;
    }
    .mode-btn {
      background: rgba(200, 160, 60, 0.2);
      border: 1px solid rgba(200, 160, 60, 0.3);
      color: #f0e6d3;
      border-radius: 4px;
      padding: 4px 12px;
      cursor: pointer;
      font-size: 13px;
    }
    .mode-btn.active {
      background: rgba(200, 160, 60, 0.5);
      border-color: rgba(200, 160, 60, 0.8);
    }
    .mode-btn:hover { background: rgba(200, 160, 60, 0.4); }

    /* Build panel */
    #build-panel {
      position: absolute;
      bottom: 60px; left: 50%;
      transform: translateX(-50%);
      display: none;
      gap: 6px;
      background: rgba(30, 20, 10, 0.9);
      border: 1px solid rgba(200, 160, 60, 0.4);
      border-radius: 6px;
      padding: 8px 12px;
    }
    #build-panel.visible { display: flex; }
    .build-btn {
      background: rgba(200, 160, 60, 0.15);
      border: 1px solid rgba(200, 160, 60, 0.3);
      color: #f0e6d3;
      border-radius: 4px;
      padding: 6px 10px;
      cursor: pointer;
      font-size: 12px;
      text-align: center;
      line-height: 1.3;
    }
    .build-btn:hover { background: rgba(200, 160, 60, 0.35); }
    .build-btn .cost { color: #c8a03c; font-size: 11px; }

    /* Right-side panel stack */
    #right-panels {
      position: absolute;
      top: 50px; right: 12px;
      display: flex;
      flex-direction: column;
      gap: 10px;
      pointer-events: auto;
    }

    /* Role panel */
    #role-panel {
      background: rgba(30, 20, 10, 0.85);
      border: 1px solid rgba(200, 160, 60, 0.4);
      border-radius: 6px;
      padding: 10px 14px;
      font-size: 13px;
      width: 210px;
    }
    .role-row {
      margin-bottom: 8px;
    }
    .role-row label,
    .role-row .role-label {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .role-desc {
      font-size: 10px;
      color: rgba(220, 180, 90, 0.85);
      margin-top: 1px;
    }
    .role-stepper {
      display: flex;
      align-items: center;
      gap: 0;
    }
    .role-stepper .role-minus,
    .role-stepper .role-plus {
      background: rgba(200, 160, 60, 0.25);
      border: 1px solid rgba(200, 160, 60, 0.4);
      color: #f0e6d3;
      width: 22px;
      height: 22px;
      font-size: 14px;
      line-height: 1;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 0;
    }
    .role-stepper .role-minus { border-radius: 3px 0 0 3px; }
    .role-stepper .role-plus  { border-radius: 0 3px 3px 0; }
    .role-stepper .role-minus:hover:not(:disabled),
    .role-stepper .role-plus:hover:not(:disabled) { background: rgba(200, 160, 60, 0.45); }
    .role-stepper .role-minus:disabled,
    .role-stepper .role-plus:disabled { opacity: 0.3; cursor: default; }
    .role-stepper .role-count {
      background: rgba(200, 160, 60, 0.1);
      border-top: 1px solid rgba(200, 160, 60, 0.4);
      border-bottom: 1px solid rgba(200, 160, 60, 0.4);
      color: #f0e6d3;
      width: 28px;
      height: 22px;
      font-size: 13px;
      text-align: center;
      line-height: 22px;
    }
    .role-value { min-width: 32px; text-align: right; }

    /* Debug panel */
    /* Left panel stack — holds debug + bees tabs */
    #left-panels {
      position: absolute;
      left: 0;
      top: 42px;
      z-index: 15;
      pointer-events: auto;
      display: flex;
      flex-direction: column;
      gap: 2px;
    }
    #debug-panel {
      display: flex;
      flex-direction: row;
    }
    #debug-tab {
      background: rgba(30, 20, 10, 0.85);
      border: 1px solid rgba(200, 160, 60, 0.4);
      border-left: none;
      border-radius: 0 6px 6px 0;
      padding: 4px 8px;
      cursor: pointer;
      font-size: 11px;
      color: #c8a03c;
      white-space: nowrap;
    }
    #debug-tab:hover { background: rgba(200, 160, 60, 0.25); }
    #debug-content {
      width: 0;
      height: 0;
      overflow: hidden;
      background: rgba(30, 20, 10, 0.9);
      border: 1px solid rgba(200, 160, 60, 0.4);
      border-left: none;
      border-radius: 0 6px 6px 0;
      transition: width 0.2s ease, height 0.2s ease;
      white-space: nowrap;
      font-size: 12px;
      line-height: 1.6;
    }
    #debug-panel.debug-open #debug-content {
      width: 240px;
      height: auto;
      padding: 10px 12px;
      overflow-y: auto;
      max-height: 80vh;
    }
    #debug-panel.debug-open #debug-tab { display: none; }
    #debug-content .debug-section {
      margin-bottom: 8px;
      border-bottom: 1px solid rgba(200, 160, 60, 0.2);
      padding-bottom: 6px;
    }
    #debug-content .debug-section:last-child { border-bottom: none; }
    #debug-content .debug-section-title {
      color: #c8a03c;
      font-weight: bold;
      font-size: 11px;
      text-transform: uppercase;
      margin-bottom: 3px;
    }
    #debug-content .debug-row {
      display: flex;
      justify-content: space-between;
      gap: 8px;
    }
    #debug-content .debug-val { color: #f0e6d3; }
    #debug-content .debug-lbl { color: rgba(240, 230, 211, 0.6); }
    #debug-close {
      background: none;
      border: none;
      color: rgba(240, 230, 211, 0.5);
      cursor: pointer;
      font-size: 14px;
      float: right;
      padding: 0 2px;
      line-height: 1;
    }
    #debug-close:hover { color: #f0e6d3; }
    .debug-btn {
      background: rgba(200, 160, 60, 0.2);
      border: 1px solid rgba(200, 160, 60, 0.3);
      color: #f0e6d3;
      border-radius: 4px;
      padding: 3px 8px;
      cursor: pointer;
      font-size: 11px;
      margin: 2px 2px 2px 0;
    }
    .debug-btn:hover { background: rgba(200, 160, 60, 0.4); }
    .debug-checkbox {
      display: flex;
      align-items: center;
      gap: 6px;
      margin: 3px 0;
    }
    .debug-checkbox input { accent-color: #c8a03c; }
    /* Save indicator */
    #save-indicator {
      position: absolute;
      top: 8px; left: 220px;
      background: rgba(30, 80, 30, 0.85);
      border: 1px solid rgba(80, 200, 80, 0.5);
      border-radius: 6px;
      padding: 4px 10px;
      font-size: 12px;
      color: #a0f0a0;
      opacity: 0;
      transition: opacity 0.3s;
      pointer-events: none;
    }
    #save-indicator.visible { opacity: 1; }

    @media (max-width: 600px) {
      #left-panels { display: none !important; }
      #save-indicator { display: none; }
    }

    /* Bees panel */
    #bees-panel {
      display: flex;
      flex-direction: row;
    }
    #bees-tab {
      background: rgba(30, 20, 10, 0.85);
      border: 1px solid rgba(200, 160, 60, 0.4);
      border-left: none;
      border-radius: 0 6px 6px 0;
      padding: 4px 8px;
      cursor: pointer;
      font-size: 11px;
      color: #c8a03c;
      white-space: nowrap;
    }
    #bees-tab:hover { background: rgba(200, 160, 60, 0.25); }
    #bees-content {
      width: 0;
      height: 0;
      overflow: hidden;
      background: rgba(30, 20, 10, 0.9);
      border: 1px solid rgba(200, 160, 60, 0.4);
      border-left: none;
      border-radius: 0 6px 6px 0;
      transition: width 0.2s ease, height 0.2s ease;
      white-space: nowrap;
      font-size: 12px;
      line-height: 1.5;
    }
    #bees-panel.bees-open #bees-content {
      width: 280px;
      height: auto;
      padding: 10px 12px;
      overflow-y: auto;
      max-height: 80vh;
    }
    #bees-panel.bees-open #bees-tab { display: none; }
    #bees-close {
      background: none;
      border: none;
      color: rgba(240, 230, 211, 0.5);
      cursor: pointer;
      font-size: 14px;
      float: right;
      padding: 0 2px;
      line-height: 1;
    }
    #bees-close:hover { color: #f0e6d3; }
    #bees-filter-bar {
      display: flex;
      gap: 3px;
      flex-wrap: wrap;
      margin-bottom: 6px;
    }
    .bees-filter-btn {
      background: rgba(200, 160, 60, 0.15);
      border: 1px solid rgba(200, 160, 60, 0.3);
      color: rgba(240, 230, 211, 0.7);
      border-radius: 3px;
      padding: 2px 6px;
      cursor: pointer;
      font-size: 10px;
    }
    .bees-filter-btn.active {
      background: rgba(200, 160, 60, 0.4);
      border-color: rgba(200, 160, 60, 0.7);
      color: #f0e6d3;
    }
    .bees-filter-btn:hover { background: rgba(200, 160, 60, 0.3); }
    #bees-list {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }
    .bee-row {
      display: flex;
      justify-content: space-between;
      gap: 6px;
      padding: 2px 4px;
      border-radius: 3px;
      cursor: pointer;
    }
    .bee-row:hover { background: rgba(200, 160, 60, 0.15); }
    .bee-row .bee-id { color: rgba(240, 230, 211, 0.5); min-width: 28px; }
    .bee-row .bee-role { color: #c8a03c; min-width: 52px; }
    .bee-row .bee-state { color: rgba(240, 230, 211, 0.8); flex: 1; overflow: hidden; text-overflow: ellipsis; }
    .bee-row .bee-energy { color: rgba(240, 230, 211, 0.5); min-width: 32px; text-align: right; }
    #bees-summary {
      margin-bottom: 6px;
      padding-bottom: 4px;
      border-bottom: 1px solid rgba(200, 160, 60, 0.2);
      color: rgba(240, 230, 211, 0.7);
      font-size: 11px;
    }

    /* Hover tooltip (follows cursor) */
    #hex-hover {
      position: absolute;
      pointer-events: none;
      background: rgba(30, 20, 10, 0.9);
      border: 1px solid rgba(200, 160, 60, 0.4);
      border-radius: 5px;
      padding: 4px 8px;
      font-size: 12px;
      white-space: nowrap;
      display: none;
      z-index: 10;
    }
    #hex-hover.visible { display: block; }

    /* Selection detail panel — stacks below role panel via #right-panels flex */
    #hex-info {
      background: rgba(30, 20, 10, 0.9);
      border: 1px solid rgba(200, 160, 60, 0.4);
      border-radius: 6px;
      padding: 12px 16px;
      font-size: 14px;
      width: 210px;
      display: none;
      line-height: 1.5;
    }
    #hex-info.visible { display: block; }
    #hex-info .info-header {
      font-size: 16px;
      font-weight: bold;
      margin-bottom: 6px;
      border-bottom: 1px solid rgba(200, 160, 60, 0.3);
      padding-bottom: 5px;
    }
    #hex-info .bee-list {
      margin-top: 6px;
      border-top: 1px solid rgba(200, 160, 60, 0.3);
      padding-top: 5px;
    }
    #hex-info .bee-entry {
      font-size: 13px;
      color: rgba(240, 230, 211, 0.8);
    }

    /* Build notification */
    #build-notification {
      position: absolute;
      bottom: 100px; left: 50%;
      transform: translateX(-50%);
      background: rgba(160, 40, 40, 0.9);
      border: 1px solid rgba(200, 80, 80, 0.6);
      border-radius: 6px;
      padding: 6px 14px;
      font-size: 13px;
      color: #f0d0d0;
      display: none;
      white-space: nowrap;
    }
    #build-notification.visible { display: block; }

    /* Role toggle button - hidden on desktop */
    #role-toggle {
      display: none;
      background: rgba(200, 160, 60, 0.2);
      border: 1px solid rgba(200, 160, 60, 0.3);
      color: #f0e6d3;
      border-radius: 4px;
      padding: 4px 12px;
      cursor: pointer;
      font-size: 13px;
    }
    #role-toggle:hover { background: rgba(200, 160, 60, 0.4); }

    /* ===== Mobile layout ===== */
    @media (max-width: 600px) {
      /* Resource bar: wrap items, smaller text */
      #resource-bar {
        font-size: 11px;
        gap: 6px;
        padding: 4px 8px;
        flex-wrap: wrap;
        justify-content: center;
        max-width: 100%;
        left: 0;
        right: 0;
        transform: none;
        border-radius: 0;
        top: 0;
      }
      .resource-item[data-tip]::after { display: none !important; }

      /* Speed controls: smaller, hide volume */
      #speed-controls {
        padding: 3px 6px;
        top: auto;
        bottom: 56px;
        left: 8px;
        z-index: 5;
      }
      .speed-btn { padding: 2px 6px; font-size: 12px; }
      .volume-sep, .volume-control { display: none; }

      /* Time display: move below resource bar */
      #time-display {
        top: auto;
        bottom: 56px;
        right: 8px;
        left: auto;
        font-size: 12px;
        padding: 4px 8px;
        z-index: 5;
      }

      /* Mode toolbar: pin to bottom full-width */
      #mode-toolbar {
        bottom: 0;
        left: 0;
        right: 0;
        transform: none;
        border-radius: 0;
        justify-content: center;
        padding: 6px 8px;
        gap: 4px;
        z-index: 10;
      }
      .mode-btn {
        min-height: 44px;
        padding: 6px 10px;
        font-size: 13px;
        flex: 1;
        text-align: center;
      }

      /* Build panel: full width above toolbar */
      #build-panel {
        bottom: 52px;
        left: 0;
        right: 0;
        transform: none;
        border-radius: 6px 6px 0 0;
        flex-wrap: wrap;
        justify-content: center;
        padding: 6px 8px;
        z-index: 9;
      }
      .build-btn { min-height: 44px; flex: 1; min-width: 80px; }

      /* Role panel: collapsible bottom sheet */
      #role-panel {
        position: fixed;
        top: auto;
        bottom: 52px;
        left: 0;
        right: 0;
        width: 100%;
        border-radius: 8px 8px 0 0;
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.25s ease;
        z-index: 12;
        padding: 0 14px;
      }
      #role-panel.mobile-open {
        max-height: 280px;
        padding: 10px 14px;
        overflow-y: auto;
      }
      .role-stepper button {
        min-height: 32px;
        min-width: 32px;
        touch-action: manipulation;
      }
      .role-stepper .role-count {
        min-height: 32px;
        line-height: 32px;
        width: 36px;
      }

      /* Role toggle: show on mobile */
      #role-toggle {
        display: inline-block;
        min-height: 44px;
      }

      /* Right panels: reset on mobile */
      #right-panels {
        position: static;
        display: contents;
      }

      /* Hex info: bottom sheet above toolbar on mobile */
      #hex-info {
        position: fixed;
        top: auto;
        bottom: 52px;
        left: 0;
        right: 0;
        width: auto;
        max-width: 100%;
        min-width: auto;
        border-radius: 8px 8px 0 0;
        max-height: 200px;
        overflow-y: auto;
        z-index: 11;
        font-size: 13px;
      }

      /* Hover tooltip: hide on touch */
      #hex-hover { display: none !important; }

      /* Build notification: reposition above build area */
      #build-notification {
        bottom: 110px;
        font-size: 12px;
      }

      /* Minimap: hide on mobile */
      #minimap { display: none !important; }
    }
  </style>
</head>
<body>
  <div id="game-container">
    <canvas id="gameCanvas"></canvas>

    <div id="hud">
      <!-- Left Panel Stack (Debug + Bees) -->
      <div id="left-panels">
      <!-- Debug Panel -->
      <div id="debug-panel" class="debug-open">
        <div id="debug-tab">Debug</div>
        <div id="debug-content">
          <button id="debug-close">&times;</button>
          <div class="debug-section">
            <div class="debug-section-title">Simulation</div>
            <div class="debug-row"><span class="debug-lbl">Tick</span><span class="debug-val" id="dbg-tick">0</span></div>
            <div class="debug-row"><span class="debug-lbl">Day</span><span class="debug-val" id="dbg-day">1</span></div>
            <div class="debug-row"><span class="debug-lbl">Day Progress</span><span class="debug-val" id="dbg-day-pct">0%</span></div>
            <div class="debug-row"><span class="debug-lbl">FPS</span><span class="debug-val" id="dbg-fps">0</span></div>
          </div>
          <div class="debug-section">
            <div class="debug-section-title">Toggles &amp; Actions</div>
            <label class="debug-checkbox">
              <input type="checkbox" id="dbg-fog-toggle" />
              Disable Fog of War
            </label>
            <div>
              <button class="debug-btn" id="dbg-add-resources">+Resources</button>
              <button class="debug-btn" id="dbg-spawn-bees">+5 Bees</button>
            </div>
            <div>
              <button class="debug-btn" id="dbg-skip-night">Skip to Night</button>
              <button class="debug-btn" id="dbg-skip-day">Skip to Day</button>
            </div>
          </div>
          <div class="debug-section">
            <div class="debug-section-title">Save &amp; Load</div>
            <div>
              <button class="debug-btn" id="dbg-save">Save</button>
              <button class="debug-btn" id="dbg-load">Load</button>
              <button class="debug-btn" id="dbg-new-game">New Game</button>
            </div>
          </div>
          <div class="debug-section">
            <div class="debug-section-title">Data</div>
            <div>
              <button class="debug-btn" id="dbg-copy-flowers">Copy Flowers</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Bees Panel -->
      <div id="bees-panel" class="bees-open">
        <div id="bees-tab">Bees</div>
        <div id="bees-content">
          <button id="bees-close">&times;</button>
          <div id="bees-summary"></div>
          <div id="bees-filter-bar">
            <button class="bees-filter-btn active" data-role="all">All</button>
            <button class="bees-filter-btn" data-role="forager">Forager</button>
            <button class="bees-filter-btn" data-role="nurse">Nurse</button>
            <button class="bees-filter-btn" data-role="scout">Scout</button>
            <button class="bees-filter-btn" data-role="hauler">Hauler</button>
            <button class="bees-filter-btn" data-role="builder">Builder</button>
          </div>
          <div id="bees-list"></div>
        </div>
      </div>
      </div><!-- end #left-panels -->

      <!-- Save Indicator -->
      <div id="save-indicator">Saved</div>

      <!-- Speed Controls -->
      <div id="speed-controls">
        <button class="speed-btn" data-speed="0">||</button>
        <button class="speed-btn active" data-speed="1">1x</button>
        <button class="speed-btn" data-speed="2">2x</button>
        <button class="speed-btn" data-speed="3">3x</button>
        <span class="volume-sep"></span>
        <label class="volume-control">
          <span class="volume-icon">&#x1f50a;</span>
          <input type="range" id="volume-slider" min="0" max="100" value="30" />
        </label>
      </div>

      <!-- Resource Bar -->
      <div id="resource-bar">
        <div class="resource-item" data-tip="Processed from nectar. Feeds brood and fuels building.">
          <span class="resource-icon" style="background:#f0c040;"></span>
          <span>Honey: <span id="res-honey">0</span></span>
          <span class="res-delta" id="res-delta-honey"></span>
        </div>
        <div class="resource-item" data-tip="Collected from flowers by foragers. Processed into honey.">
          <span class="resource-icon" style="background:#80d040;"></span>
          <span>Nectar: <span id="res-nectar">0</span></span>
          <span class="res-delta" id="res-delta-nectar"></span>
        </div>
        <div class="resource-item" data-tip="Gathered from flowers. Combined with honey to make bee bread.">
          <span class="resource-icon" style="background:#e0c020;"></span>
          <span>Pollen: <span id="res-pollen">0</span></span>
          <span class="res-delta" id="res-delta-pollen"></span>
        </div>
        <div class="resource-item" data-tip="Made from pollen + honey. Required to start brood cycles.">
          <span class="resource-icon" style="background:#c8a040;"></span>
          <span>Bee Bread: <span id="res-beebread">0</span></span>
          <span class="res-delta" id="res-delta-beebread"></span>
        </div>
        <div class="resource-item" data-tip="Produced passively by the hive. Used to build new cells.">
          <span class="resource-icon" style="background:#e8d8a0;"></span>
          <span>Wax: <span id="res-wax">0</span></span>
          <span class="res-delta" id="res-delta-wax"></span>
        </div>
      </div>

      <!-- Time Display -->
      <div id="time-display">
        <span id="time-text">Day 1 - Morning</span>
      </div>

      <!-- Right-side panel stack -->
      <div id="right-panels">

      <!-- Role Panel -->
      <div id="role-panel">
        <div style="margin-bottom:8px; font-weight:bold;" id="res-bees">Bees: 0</div>
        <div class="role-row">
          <span class="role-label">
            Nurse
            <div class="role-stepper">
              <button class="role-minus" data-role="nurse">&minus;</button>
              <span class="role-count" id="count-nurse">1</span>
              <button class="role-plus" data-role="nurse">+</button>
            </div>
          </span>
          <div class="role-desc">Process nectar &amp; tend brood</div>
        </div>
        <div class="role-row">
          <span class="role-label">
            Scout
            <div class="role-stepper">
              <button class="role-minus" data-role="scout">&minus;</button>
              <span class="role-count" id="count-scout">1</span>
              <button class="role-plus" data-role="scout">+</button>
            </div>
          </span>
          <div class="role-desc">Explore &amp; reveal terrain</div>
        </div>
        <div class="role-row">
          <span class="role-label">
            Hauler
            <div class="role-stepper">
              <button class="role-minus" data-role="hauler">&minus;</button>
              <span class="role-count" id="count-hauler">0</span>
              <button class="role-plus" data-role="hauler">+</button>
            </div>
          </span>
          <div class="role-desc">Transport from waystations</div>
        </div>
        <div class="role-row">
          <span class="role-label">
            Builder
            <div class="role-stepper">
              <button class="role-minus" data-role="builder">&minus;</button>
              <span class="role-count" id="count-builder">1</span>
              <button class="role-plus" data-role="builder">+</button>
            </div>
          </span>
          <div class="role-desc">Construct new cells</div>
        </div>
        <div class="role-row">
          <label>
            Forager
            <span class="role-value" id="val-forager">--</span>
          </label>
          <div class="role-desc">Gather nectar &amp; pollen (all remaining)</div>
        </div>
      </div>

      <!-- Selection Detail Panel -->
      <div id="hex-info">
        <div id="hex-info-content"></div>
      </div>

      </div><!-- end #right-panels -->

      <!-- Mode Toolbar -->
      <div id="mode-toolbar">
        <button class="mode-btn active" data-mode="select">Select (Esc)</button>
        <button class="mode-btn" data-mode="build">Build (B)</button>
        <button id="role-toggle">Roles</button>
      </div>

      <!-- Build Panel -->
      <div id="build-panel">
        <button class="build-btn" data-build="honey_storage">
          Honey Storage<br/><span class="cost">10 wax</span>
        </button>
        <button class="build-btn" data-build="pollen_storage">
          Pollen Storage<br/><span class="cost">8 wax</span>
        </button>
        <button class="build-btn" data-build="processing">
          Processing<br/><span class="cost">8 wax</span>
        </button>
        <button class="build-btn" data-build="brood">
          Brood Cell<br/><span class="cost">12 wax, 5 honey</span>
        </button>
        <button class="build-btn" data-build="waystation">
          Waystation<br/><span class="cost">6 wax</span>
        </button>
        <button class="build-btn" data-build="nectar_storage">
          Nectar Storage<br/><span class="cost">8 wax</span>
        </button>
        <button class="build-btn" data-build="wax_works">
          Wax Works<br/><span class="cost">3 honey</span>
        </button>
      </div>

      <!-- Build Notification -->
      <div id="build-notification"></div>

      <!-- Hover Tooltip -->
      <div id="hex-hover"></div>
    </div>
  </div>

  <script type="module" src="/src/main.ts"></script>
</body>
</html>
